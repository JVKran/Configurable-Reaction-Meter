#ifndef __TIMER_HPP
#define __TIMER_HPP

#include "includes.h"

class timer_c {
private:

public:
	void configure(const int microseconds){
		int counter    = 50000;                     // 1/(50 MHz) x (50000) = 1 msec
		IOWR_ALTERA_AVALON_TIMER_PERIODL(TIMER_0_BASE, counter & ALTERA_AVALON_TIMER_PERIODL_MSK);
		IOWR_ALTERA_AVALON_TIMER_PERIODH(TIMER_0_BASE, (counter >> 16) & ALTERA_AVALON_TIMER_PERIODH_MSK);

		alt_ic_isr_register(TIMER_0_IRQ_INTERRUPT_CONTROLLER_ID, TIMER_0_IRQ, interval_timer_ISR, 0, 0x0);

		int mask = ALTERA_AVALON_TIMER_CONTROL_CONT_MSK | ALTERA_AVALON_TIMER_CONTROL_ITO_MSK | ALTERA_AVALON_TIMER_CONTROL_START_MSK;
		IOWR_ALTERA_AVALON_TIMER_CONTROL(TIMER_0_BASE, mask);
	}
};

#endif //__TIMER_HPP
