#ifndef __TIMER_HPP
#define __TIMER_HPP

#include <stdint.h>
#include <system.h>

#include <sys/alt_irq.h>
#include <altera_avalon_timer_regs.h>

class timer_c {
private:
	const uint32_t timer_base;
	const uint32_t irq_controller;
	const uint32_t irq_id;

	void isr(void* isr_context);
	void (*m_callback)();
public:
	timer_c(const uint16_t timer_base, const uint16_t irq_controller, const uint16_t irq_id);
	void configure(const int microseconds, void (*callback)());

	void start();
	void stop();
};

#endif //__TIMER_HPP
